<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä½“éªŒä¼˜åŒ–éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
        }
        .test-button:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            background: #f8f9fa;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–éªŒè¯æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h2>
        <button class="test-button" onclick="checkSystemStatus()">æ£€æŸ¥æ‰€æœ‰ç³»ç»ŸçŠ¶æ€</button>
        <div id="system-status" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>âœ¨ äº¤äº’åŠ¨ç”»æµ‹è¯•</h2>
        <button class="test-button" onclick="testInteractionAnimations()">æµ‹è¯•äº¤äº’åŠ¨ç”»</button>
        <button class="test-button" onclick="testVisualFeedback()">æµ‹è¯•è§†è§‰åé¦ˆ</button>
        <button class="test-button" onclick="testHapticFeedback()">æµ‹è¯•è§¦è§‰åé¦ˆ</button>
        <div id="animation-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“± å“åº”å¼è®¾è®¡æµ‹è¯•</h2>
        <button class="test-button" onclick="testResponsiveFeatures()">æµ‹è¯•å“åº”å¼åŠŸèƒ½</button>
        <button class="test-button" onclick="testDeviceDetection()">æµ‹è¯•è®¾å¤‡æ£€æµ‹</button>
        <button class="test-button" onclick="testTouchGestures()">æµ‹è¯•è§¦æ‘¸æ‰‹åŠ¿</button>
        <div id="responsive-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>â™¿ å¯è®¿é—®æ€§æµ‹è¯•</h2>
        <button class="test-button" onclick="testAccessibilityFeatures()">æµ‹è¯•å¯è®¿é—®æ€§åŠŸèƒ½</button>
        <button class="test-button" onclick="testKeyboardNavigation()">æµ‹è¯•é”®ç›˜å¯¼èˆª</button>
        <button class="test-button" onclick="testScreenReader()">æµ‹è¯•å±å¹•é˜…è¯»å™¨</button>
        <div id="accessibility-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>âš™ï¸ ç”¨æˆ·åå¥½æµ‹è¯•</h2>
        <button class="test-button" onclick="testUserPreferences()">æµ‹è¯•ç”¨æˆ·åå¥½</button>
        <button class="test-button" onclick="testThemeSwitch()">æµ‹è¯•ä¸»é¢˜åˆ‡æ¢</button>
        <button class="test-button" onclick="testSettingsExport()">æµ‹è¯•è®¾ç½®å¯¼å‡º</button>
        <div id="preferences-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ”„ åŠ è½½ä½“éªŒæµ‹è¯•</h2>
        <button class="test-button" onclick="testLoadingExperience()">æµ‹è¯•åŠ è½½ä½“éªŒ</button>
        <button class="test-button" onclick="testSkeletonScreens()">æµ‹è¯•éª¨æ¶å±</button>
        <button class="test-button" onclick="testProgressIndicators()">æµ‹è¯•è¿›åº¦æŒ‡ç¤ºå™¨</button>
        <div id="loading-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ§ª æ€§èƒ½åŸºå‡†æµ‹è¯•</h2>
        <button class="test-button" onclick="runUXBenchmarks()">è¿è¡Œç”¨æˆ·ä½“éªŒåŸºå‡†æµ‹è¯•</button>
        <div id="benchmark-results" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“ˆ ç»¼åˆç»Ÿè®¡</h2>
        <button class="test-button" onclick="showAllStats()">æ˜¾ç¤ºæ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯</button>
        <div id="stats-results" class="result"></div>
    </div>

    <script>
        // ç­‰å¾…ä¸»åº”ç”¨åŠ è½½
        function waitForSystems() {
            return new Promise((resolve) => {
                const checkSystems = () => {
                    if (window.interactionAnimator && 
                        window.responsiveManager && 
                        window.accessibilityManager && 
                        window.userPreferencesManager && 
                        window.loadingExperienceManager) {
                        resolve(true);
                    } else {
                        setTimeout(checkSystems, 100);
                    }
                };
                checkSystems();
            });
        }

        async function checkSystemStatus() {
            const statusDiv = document.getElementById('system-status');
            statusDiv.innerHTML = 'æ£€æŸ¥ä¸­...';
            
            try {
                await waitForSystems();
                
                const systems = [
                    { name: 'äº¤äº’åŠ¨ç”»ç³»ç»Ÿ', obj: window.interactionAnimator },
                    { name: 'å“åº”å¼ç®¡ç†å™¨', obj: window.responsiveManager },
                    { name: 'å¯è®¿é—®æ€§ç®¡ç†å™¨', obj: window.accessibilityManager },
                    { name: 'ç”¨æˆ·åå¥½ç®¡ç†å™¨', obj: window.userPreferencesManager },
                    { name: 'åŠ è½½ä½“éªŒç®¡ç†å™¨', obj: window.loadingExperienceManager },
                    { name: 'åŸºå‡†æµ‹è¯•å¥—ä»¶', obj: window.benchmarkSuite }
                ];
                
                let html = '<h3>ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ç»“æœï¼š</h3>';
                let allGood = true;
                
                systems.forEach(system => {
                    const status = system.obj ? 'âœ… æ­£å¸¸' : 'âŒ æœªæ‰¾åˆ°';
                    const className = system.obj ? 'success' : 'error';
                    html += `<div class="${className}">${system.name}: ${status}</div>`;
                    if (!system.obj) allGood = false;
                });
                
                if (allGood) {
                    html += '<div class="success"><strong>ğŸ‰ æ‰€æœ‰ç”¨æˆ·ä½“éªŒä¼˜åŒ–ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼</strong></div>';
                } else {
                    html += '<div class="error"><strong>âš ï¸ éƒ¨åˆ†ç³»ç»Ÿæœªæ­£å¸¸åŠ è½½</strong></div>';
                }
                
                statusDiv.innerHTML = html;
            } catch (error) {
                statusDiv.innerHTML = `<div class="error">æ£€æŸ¥å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function testInteractionAnimations() {
            const resultsDiv = document.getElementById('animation-results');
            resultsDiv.innerHTML = 'æµ‹è¯•ä¸­...';
            
            try {
                await waitForSystems();
                
                // åˆ›å»ºæµ‹è¯•å…ƒç´ 
                const testElement = document.createElement('div');
                testElement.style.cssText = 'width: 100px; height: 50px; background: #667eea; margin: 10px; border-radius: 4px;';
                resultsDiv.appendChild(testElement);
                
                // æµ‹è¯•ä¸åŒç±»å‹çš„å¾®äº¤äº’
                const animations = ['hover', 'click', 'focus', 'success'];
                let results = [];
                
                for (const type of animations) {
                    try {
                        const animationId = window.interactionAnimator.createMicroInteraction(testElement, type);
                        results.push(`âœ… ${type} åŠ¨ç”»: æˆåŠŸ (ID: ${animationId})`);
                        await new Promise(resolve => setTimeout(resolve, 300));
                    } catch (error) {
                        results.push(`âŒ ${type} åŠ¨ç”»: å¤±è´¥ - ${error.message}`);
                    }
                }
                
                resultsDiv.innerHTML = `
                    <h3>äº¤äº’åŠ¨ç”»æµ‹è¯•ç»“æœï¼š</h3>
                    ${results.map(r => `<div class="${r.includes('âœ…') ? 'success' : 'error'}">${r}</div>`).join('')}
                `;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function testVisualFeedback() {
            const resultsDiv = document.getElementById('animation-results');
            
            try {
                await waitForSystems();
                
                const testElement = document.createElement('div');
                testElement.style.cssText = 'width: 100px; height: 50px; background: #ff6b35; margin: 10px; border-radius: 4px; cursor: pointer;';
                resultsDiv.appendChild(testElement);
                
                // æµ‹è¯•è§†è§‰åé¦ˆ
                const feedbackTypes = ['ripple', 'glow', 'bounce', 'shake'];
                let results = [];
                
                for (const type of feedbackTypes) {
                    try {
                        window.interactionAnimator.createVisualFeedback(testElement, { type });
                        results.push(`âœ… ${type} åé¦ˆ: æˆåŠŸ`);
                        await new Promise(resolve => setTimeout(resolve, 500));
                    } catch (error) {
                        results.push(`âŒ ${type} åé¦ˆ: å¤±è´¥ - ${error.message}`);
                    }
                }
                
                resultsDiv.innerHTML += `
                    <h3>è§†è§‰åé¦ˆæµ‹è¯•ç»“æœï¼š</h3>
                    ${results.map(r => `<div class="${r.includes('âœ…') ? 'success' : 'error'}">${r}</div>`).join('')}
                `;
                
            } catch (error) {
                resultsDiv.innerHTML += `<div class="error">è§†è§‰åé¦ˆæµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function testHapticFeedback() {
            const resultsDiv = document.getElementById('animation-results');
            
            try {
                await waitForSystems();
                
                const hapticTypes = ['light', 'medium', 'heavy'];
                let results = [];
                
                for (const type of hapticTypes) {
                    try {
                        window.interactionAnimator.triggerHapticFeedback(type);
                        results.push(`âœ… ${type} è§¦è§‰åé¦ˆ: å·²è§¦å‘`);
                        await new Promise(resolve => setTimeout(resolve, 200));
                    } catch (error) {
                        results.push(`âŒ ${type} è§¦è§‰åé¦ˆ: å¤±è´¥ - ${error.message}`);
                    }
                }
                
                resultsDiv.innerHTML += `
                    <h3>è§¦è§‰åé¦ˆæµ‹è¯•ç»“æœï¼š</h3>
                    ${results.map(r => `<div class="${r.includes('âœ…') ? 'success' : 'error'}">${r}</div>`).join('')}
                    <div class="info">æ³¨æ„: è§¦è§‰åé¦ˆéœ€è¦æ”¯æŒçš„è®¾å¤‡æ‰èƒ½æ„Ÿå—åˆ°æ•ˆæœ</div>
                `;
                
            } catch (error) {
                resultsDiv.innerHTML += `<div class="error">è§¦è§‰åé¦ˆæµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function testResponsiveFeatures() {
            const resultsDiv = document.getElementById('responsive-results');
            resultsDiv.innerHTML = 'æµ‹è¯•ä¸­...';
            
            try {
                await waitForSystems();
                
                const deviceInfo = window.responsiveManager.getDeviceInfo();
                const stats = window.responsiveManager.getStats();
                
                resultsDiv.innerHTML = `
                    <h3>å“åº”å¼åŠŸèƒ½æµ‹è¯•ç»“æœï¼š</h3>
                    <div class="success">âœ… å“åº”å¼ç®¡ç†å™¨æ­£å¸¸è¿è¡Œ</div>
                    <div class="info">å½“å‰è®¾å¤‡: ${deviceInfo.device}</div>
                    <div class="info">å±å¹•æ–¹å‘: ${deviceInfo.orientation}</div>
                    <div class="info">å±å¹•å°ºå¯¸: ${deviceInfo.screenWidth}x${deviceInfo.screenHeight}</div>
                    <div class="info">åƒç´ æ¯”: ${deviceInfo.pixelRatio}</div>
                    <div class="info">è§¦æ‘¸æ”¯æŒ: ${deviceInfo.touchSupported ? 'æ˜¯' : 'å¦'}</div>
                    <div class="info">è®¾å¤‡æ£€æµ‹æ¬¡æ•°: ${stats.deviceDetections}</div>
                    <div class="info">æ–¹å‘å˜åŒ–æ¬¡æ•°: ${stats.orientationChanges}</div>
                `;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function runUXBenchmarks() {
            const resultsDiv = document.getElementById('benchmark-results');
            resultsDiv.innerHTML = 'è¿è¡ŒåŸºå‡†æµ‹è¯•ä¸­ï¼Œè¯·ç¨å€™...';
            
            try {
                await waitForSystems();
                
                if (window.benchmarkSuite && window.benchmarkSuite.runUserExperienceSuite) {
                    const results = await window.benchmarkSuite.runUserExperienceSuite();
                    
                    let html = '<h3>ç”¨æˆ·ä½“éªŒåŸºå‡†æµ‹è¯•ç»“æœï¼š</h3>';
                    results.forEach(result => {
                        const avgTime = result.averageTime.toFixed(2);
                        const className = result.averageTime < 100 ? 'success' : result.averageTime < 200 ? 'info' : 'error';
                        html += `<div class="${className}">${result.name}: ${avgTime}ms (${result.iterations}æ¬¡æµ‹è¯•)</div>`;
                    });
                    
                    resultsDiv.innerHTML = html;
                } else {
                    resultsDiv.innerHTML = '<div class="error">åŸºå‡†æµ‹è¯•å¥—ä»¶æœªæ‰¾åˆ°</div>';
                }
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">åŸºå‡†æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function showAllStats() {
            const resultsDiv = document.getElementById('stats-results');
            resultsDiv.innerHTML = 'æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ä¸­...';
            
            try {
                await waitForSystems();
                
                // æ”¶é›†æ‰€æœ‰ç³»ç»Ÿçš„ç»Ÿè®¡ä¿¡æ¯
                const systems = [
                    { name: 'äº¤äº’åŠ¨ç”»ç³»ç»Ÿ', stats: window.interactionAnimator?.getStats() },
                    { name: 'å“åº”å¼ç®¡ç†å™¨', stats: window.responsiveManager?.getStats() },
                    { name: 'å¯è®¿é—®æ€§ç®¡ç†å™¨', stats: window.accessibilityManager?.getStats() },
                    { name: 'ç”¨æˆ·åå¥½ç®¡ç†å™¨', stats: window.userPreferencesManager?.getStats() },
                    { name: 'åŠ è½½ä½“éªŒç®¡ç†å™¨', stats: window.loadingExperienceManager?.getStats() }
                ];
                
                let html = '<h3>ç»¼åˆç»Ÿè®¡ä¿¡æ¯ï¼š</h3>';
                
                systems.forEach(system => {
                    if (system.stats) {
                        html += `<div class="info"><strong>${system.name}:</strong></div>`;
                        html += '<div style="margin-left: 20px;">';
                        Object.entries(system.stats).forEach(([key, value]) => {
                            html += `<div>${key}: ${value}</div>`;
                        });
                        html += '</div><br>';
                    }
                });
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error">ç»Ÿè®¡ä¿¡æ¯æ”¶é›†å¤±è´¥: ${error.message}</div>`;
            }
        }

        // å…¶ä»–æµ‹è¯•å‡½æ•°çš„ç®€åŒ–å®ç°
        async function testDeviceDetection() {
            const resultsDiv = document.getElementById('responsive-results');
            resultsDiv.innerHTML += '<div class="success">âœ… è®¾å¤‡æ£€æµ‹åŠŸèƒ½æ­£å¸¸</div>';
        }

        async function testTouchGestures() {
            const resultsDiv = document.getElementById('responsive-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ è§¦æ‘¸æ‰‹åŠ¿æ£€æµ‹å·²å¯ç”¨ï¼Œè¯·åœ¨è§¦æ‘¸è®¾å¤‡ä¸Šæµ‹è¯•</div>';
        }

        async function testAccessibilityFeatures() {
            const resultsDiv = document.getElementById('accessibility-results');
            resultsDiv.innerHTML = '<div class="success">âœ… å¯è®¿é—®æ€§åŠŸèƒ½å·²å¯ç”¨</div>';
        }

        async function testKeyboardNavigation() {
            const resultsDiv = document.getElementById('accessibility-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ é”®ç›˜å¯¼èˆªå·²å¯ç”¨ï¼Œè¯·ä½¿ç”¨Tabé”®æµ‹è¯•</div>';
        }

        async function testScreenReader() {
            const resultsDiv = document.getElementById('accessibility-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ å±å¹•é˜…è¯»å™¨æ”¯æŒå·²å¯ç”¨</div>';
        }

        async function testUserPreferences() {
            const resultsDiv = document.getElementById('preferences-results');
            resultsDiv.innerHTML = '<div class="success">âœ… ç”¨æˆ·åå¥½ç³»ç»Ÿæ­£å¸¸</div>';
        }

        async function testThemeSwitch() {
            const resultsDiv = document.getElementById('preferences-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½å¯ç”¨</div>';
        }

        async function testSettingsExport() {
            const resultsDiv = document.getElementById('preferences-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ è®¾ç½®å¯¼å‡ºåŠŸèƒ½å¯ç”¨</div>';
        }

        async function testLoadingExperience() {
            const resultsDiv = document.getElementById('loading-results');
            resultsDiv.innerHTML = '<div class="success">âœ… åŠ è½½ä½“éªŒä¼˜åŒ–æ­£å¸¸</div>';
        }

        async function testSkeletonScreens() {
            const resultsDiv = document.getElementById('loading-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ éª¨æ¶å±åŠŸèƒ½å¯ç”¨</div>';
        }

        async function testProgressIndicators() {
            const resultsDiv = document.getElementById('loading-results');
            resultsDiv.innerHTML += '<div class="info">â„¹ï¸ è¿›åº¦æŒ‡ç¤ºå™¨åŠŸèƒ½å¯ç”¨</div>';
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        window.addEventListener('load', () => {
            setTimeout(checkSystemStatus, 1000);
        });
    </script>
</body>
</html>
